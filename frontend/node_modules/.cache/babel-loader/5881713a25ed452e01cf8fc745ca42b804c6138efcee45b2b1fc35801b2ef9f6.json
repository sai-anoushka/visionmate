{"ast":null,"code":"var _jsxFileName = \"/Users/anoush/VisionMate/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [caption, setCaption] = useState(\"\");\n  const [imagePreview, setImagePreview] = useState(null);\n  const [cameraActive, setCameraActive] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [cameraPermission, setCameraPermission] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n\n  // Update this URL to your actual backend\n  const BACKEND_URL = \"http://192.168.1.108:8000/caption/\";\n\n  // Check if device is mobile\n  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n  // Clean up function to stop camera\n  const cleanupCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => {\n        if (track.readyState === 'live') {\n          track.stop();\n        }\n      });\n      streamRef.current = null;\n    }\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => cleanupCamera();\n  }, []);\n  const playSound = src => {\n    try {\n      const audio = new Audio(src);\n      audio.play().catch(() => {});\n    } catch (error) {\n      console.log(\"Audio play error:\", error);\n    }\n  };\n  const speak = message => {\n    if ('speechSynthesis' in window) {\n      try {\n        const utterance = new SpeechSynthesisUtterance(message);\n        speechSynthesis.speak(utterance);\n      } catch (error) {\n        console.log(\"Speech synthesis error:\", error);\n      }\n    }\n  };\n  const generateCaption = async blob => {\n    setLoading(true);\n    setError(null);\n    const formData = new FormData();\n    const file = new File([blob], \"captured_image.jpg\", {\n      type: \"image/jpeg\"\n    });\n    formData.append(\"file\", file);\n    try {\n      const response = await fetch(BACKEND_URL, {\n        method: \"POST\",\n        body: formData\n      });\n      if (!response.ok) throw new Error(`Server error: ${response.status}`);\n      const data = await response.json();\n      setCaption(data.caption);\n      speak(`Caption: ${data.caption}`);\n    } catch (error) {\n      setError(\"Failed to generate caption. Please try again.\");\n      speak(\"Error generating caption.\");\n      console.error(\"Upload error:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check for camera permissions\n  const checkCameraPermission = async () => {\n    try {\n      const result = await navigator.permissions.query({\n        name: 'camera'\n      });\n      setCameraPermission(result.state);\n      return result.state;\n    } catch (error) {\n      console.log(\"Permission API not supported, will try direct access\");\n      return \"prompt\"; // Assume we need to prompt if the API isn't available\n    }\n  };\n  const startCamera = async () => {\n    // First, clean up any existing stream\n    cleanupCamera();\n    setError(null);\n    try {\n      // Check camera permission first\n      await checkCameraPermission();\n      const constraints = {\n        video: isMobile ? {\n          facingMode: {\n            exact: \"environment\"\n          }\n        } : true,\n        audio: false\n      };\n      console.log(\"Requesting camera with constraints:\", JSON.stringify(constraints));\n\n      // Force a small timeout to ensure DOM is ready\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      console.log(\"Camera stream obtained successfully\");\n\n      // Store the stream reference\n      streamRef.current = stream;\n\n      // Ensure video element is ready\n      if (!videoRef.current) {\n        console.error(\"Video element reference is null\");\n        setError(\"Camera initialization failed: video element not found\");\n        cleanupCamera();\n        return;\n      }\n\n      // Set the stream as the video source\n      videoRef.current.srcObject = stream;\n      console.log(\"Stream assigned to video element\");\n\n      // Setup event handlers\n      videoRef.current.onloadedmetadata = () => {\n        console.log(\"Video metadata loaded, dimensions:\", videoRef.current.videoWidth, \"x\", videoRef.current.videoHeight);\n        videoRef.current.play().then(() => {\n          console.log(\"Video playing successfully\");\n          setCameraActive(true);\n        }).catch(err => {\n          console.error(\"Video play error:\", err);\n          setError(\"Could not play video stream: \" + err.message);\n          cleanupCamera();\n        });\n      };\n      videoRef.current.onerror = event => {\n        console.error(\"Video element error:\", event);\n        setError(\"Video element error: \" + (event.message || \"Unknown error\"));\n        cleanupCamera();\n      };\n    } catch (error) {\n      console.error(\"Camera access error:\", error);\n\n      // Provide more specific error messages\n      if (error.name === \"NotAllowedError\") {\n        setError(\"Camera access denied. Please grant camera permissions in your browser settings.\");\n      } else if (error.name === \"NotFoundError\") {\n        setError(\"No camera found on this device.\");\n      } else if (error.name === \"NotReadableError\") {\n        setError(\"Camera is in use by another application.\");\n      } else if (error.name === \"OverconstrainedError\") {\n        // Try again with less strict constraints\n        try {\n          console.log(\"Retrying with basic constraints\");\n          const stream = await navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: false\n          });\n          streamRef.current = stream;\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play().then(() => {\n              setCameraActive(true);\n            }).catch(e => {\n              setError(\"Could not play video stream: \" + e.message);\n              cleanupCamera();\n            });\n          };\n        } catch (retryError) {\n          console.error(\"Retry failed:\", retryError);\n          setError(\"Camera not compatible with requested settings.\");\n          cleanupCamera();\n        }\n      } else {\n        setError(\"Could not access camera: \" + error.message);\n      }\n    }\n  };\n  const stopCamera = () => {\n    cleanupCamera();\n    setCameraActive(false);\n\n    // Clear video source\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n  };\n  const captureImage = () => {\n    if (!videoRef.current) {\n      console.error(\"Video ref not available\");\n      setError(\"Could not capture image: video element not found.\");\n      return;\n    }\n    if (!canvasRef.current) {\n      console.error(\"Canvas ref not available\");\n      setError(\"Could not capture image: canvas element not found.\");\n      return;\n    }\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n\n      // Get the actual video dimensions\n      const videoWidth = video.videoWidth;\n      const videoHeight = video.videoHeight;\n      console.log(\"Video dimensions for capture:\", videoWidth, \"x\", videoHeight);\n      if (videoWidth === 0 || videoHeight === 0) {\n        console.error(\"Video dimensions are zero\");\n        setError(\"Cannot capture image: video stream not ready. Please restart the camera.\");\n        return;\n      }\n\n      // Set canvas dimensions to match video\n      canvas.width = videoWidth;\n      canvas.height = videoHeight;\n\n      // Draw the video frame to the canvas\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n\n      // Convert canvas to blob\n      canvas.toBlob(blob => {\n        if (blob) {\n          console.log(\"Image captured successfully, size:\", blob.size, \"bytes\");\n          const imageUrl = URL.createObjectURL(blob);\n          setImagePreview(imageUrl);\n          setCaption(\"\");\n          generateCaption(blob);\n        } else {\n          console.error(\"Failed to create blob from canvas\");\n          setError(\"Failed to process captured image.\");\n        }\n      }, 'image/jpeg', 0.95);\n    } catch (error) {\n      console.error(\"Image capture error:\", error);\n      setError(\"Failed to capture image: \" + error.message);\n    }\n  };\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === \"c\") startCamera();else if (event.key === \"Escape\") stopCamera();\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: styles.header,\n      children: \"\\uD83D\\uDCF8 VisionMate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.errorBox,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.errorText,\n        children: [\"\\u26A0\\uFE0F \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.cameraContainer,\n      children: !cameraActive ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startCamera,\n        style: styles.button,\n        disabled: loading,\n        children: \"\\uD83D\\uDCF7 Open Camera\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.videoContainer,\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            autoPlay: true,\n            playsInline: true,\n            muted: true,\n            style: styles.video\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.buttonContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: captureImage,\n            style: styles.button,\n            disabled: loading,\n            children: loading ? \"Processing...\" : \"📸 Capture Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopCamera,\n            style: {\n              ...styles.button,\n              backgroundColor: \"#ff4d4d\"\n            },\n            children: \"\\u274C Close Camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.previewContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: styles.sectionHeader,\n        children: \"Image Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imagePreview,\n        alt: \"Captured\",\n        style: styles.previewImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this), caption && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.captionContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: styles.sectionHeader,\n        children: \"Caption\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.captionText,\n        children: caption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.footer,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Status: \", cameraActive ? \"Camera active\" : \"Camera inactive\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), cameraPermission && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Camera permission: \", cameraPermission]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n\n// Enhanced styles\n_s(App, \"6qCjBNapFUgEs+3bUBB/jw5pZ5s=\");\n_c = App;\nconst styles = {\n  container: {\n    padding: '15px',\n    maxWidth: '600px',\n    margin: '0 auto',\n    fontFamily: 'Arial, sans-serif',\n    minHeight: '100vh',\n    boxSizing: 'border-box'\n  },\n  header: {\n    textAlign: 'center',\n    color: '#007bff',\n    marginBottom: '20px'\n  },\n  cameraContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: '20px'\n  },\n  videoContainer: {\n    width: '100%',\n    maxWidth: '480px',\n    margin: '0 auto 10px auto',\n    borderRadius: '8px',\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n    border: '2px solid #000'\n  },\n  video: {\n    width: '100%',\n    height: 'auto',\n    display: 'block'\n  },\n  buttonContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    maxWidth: '480px',\n    gap: '10px'\n  },\n  button: {\n    padding: '15px 20px',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    color: 'white',\n    backgroundColor: '#007bff',\n    border: 'none',\n    borderRadius: '5px',\n    cursor: 'pointer',\n    width: '100%',\n    WebkitAppearance: 'none' // Fix for iOS styling\n  },\n  previewContainer: {\n    marginTop: '20px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%'\n  },\n  sectionHeader: {\n    color: '#333',\n    marginBottom: '10px',\n    textAlign: 'center'\n  },\n  previewImage: {\n    maxWidth: '100%',\n    borderRadius: '8px',\n    border: '1px solid #ddd'\n  },\n  captionContainer: {\n    marginTop: '20px',\n    padding: '15px',\n    backgroundColor: '#f8f9fa',\n    borderRadius: '8px',\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  captionText: {\n    fontSize: '18px',\n    color: '#007bff',\n    textAlign: 'center',\n    wordBreak: 'break-word'\n  },\n  errorBox: {\n    backgroundColor: '#ffeeee',\n    padding: '10px',\n    borderRadius: '5px',\n    marginBottom: '15px',\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  errorText: {\n    color: '#d32f2f',\n    margin: 0\n  },\n  footer: {\n    marginTop: '20px',\n    fontSize: '14px',\n    color: '#666',\n    textAlign: 'center'\n  }\n};\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","caption","setCaption","imagePreview","setImagePreview","cameraActive","setCameraActive","loading","setLoading","error","setError","cameraPermission","setCameraPermission","videoRef","canvasRef","streamRef","BACKEND_URL","isMobile","test","navigator","userAgent","cleanupCamera","current","getTracks","forEach","track","readyState","stop","playSound","src","audio","Audio","play","catch","console","log","speak","message","window","utterance","SpeechSynthesisUtterance","speechSynthesis","generateCaption","blob","formData","FormData","file","File","type","append","response","fetch","method","body","ok","Error","status","data","json","checkCameraPermission","result","permissions","query","name","state","startCamera","constraints","video","facingMode","exact","JSON","stringify","Promise","resolve","setTimeout","stream","mediaDevices","getUserMedia","srcObject","onloadedmetadata","videoWidth","videoHeight","then","err","onerror","event","e","retryError","stopCamera","captureImage","canvas","width","height","ctx","getContext","drawImage","toBlob","size","imageUrl","URL","createObjectURL","handleKeyDown","key","document","addEventListener","removeEventListener","style","styles","container","children","header","fileName","_jsxFileName","lineNumber","columnNumber","errorBox","errorText","cameraContainer","onClick","button","disabled","videoContainer","ref","autoPlay","playsInline","muted","buttonContainer","backgroundColor","display","previewContainer","sectionHeader","alt","previewImage","captionContainer","captionText","footer","_c","padding","maxWidth","margin","fontFamily","minHeight","boxSizing","textAlign","color","marginBottom","flexDirection","alignItems","borderRadius","overflow","border","gap","fontSize","fontWeight","cursor","WebkitAppearance","marginTop","wordBreak","$RefreshReg$"],"sources":["/Users/anoush/VisionMate/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\n\nfunction App() {\n  const [caption, setCaption] = useState(\"\");\n  const [imagePreview, setImagePreview] = useState(null);\n  const [cameraActive, setCameraActive] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [cameraPermission, setCameraPermission] = useState(null);\n  \n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n\n  // Update this URL to your actual backend\n  const BACKEND_URL = \"http://192.168.1.108:8000/caption/\";\n\n  // Check if device is mobile\n  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n  // Clean up function to stop camera\n  const cleanupCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => {\n        if (track.readyState === 'live') {\n          track.stop();\n        }\n      });\n      streamRef.current = null;\n    }\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => cleanupCamera();\n  }, []);\n\n  const playSound = (src) => {\n    try {\n      const audio = new Audio(src);\n      audio.play().catch(() => {});\n    } catch (error) {\n      console.log(\"Audio play error:\", error);\n    }\n  };\n\n  const speak = (message) => {\n    if ('speechSynthesis' in window) {\n      try {\n        const utterance = new SpeechSynthesisUtterance(message);\n        speechSynthesis.speak(utterance);\n      } catch (error) {\n        console.log(\"Speech synthesis error:\", error);\n      }\n    }\n  };\n\n  const generateCaption = async (blob) => {\n    setLoading(true);\n    setError(null);\n    \n    const formData = new FormData();\n    const file = new File([blob], \"captured_image.jpg\", { type: \"image/jpeg\" });\n    formData.append(\"file\", file);\n\n    try {\n      const response = await fetch(BACKEND_URL, {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) throw new Error(`Server error: ${response.status}`);\n      \n      const data = await response.json();\n      setCaption(data.caption);\n      speak(`Caption: ${data.caption}`);\n    } catch (error) {\n      setError(\"Failed to generate caption. Please try again.\");\n      speak(\"Error generating caption.\");\n      console.error(\"Upload error:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check for camera permissions\n  const checkCameraPermission = async () => {\n    try {\n      const result = await navigator.permissions.query({ name: 'camera' });\n      setCameraPermission(result.state);\n      return result.state;\n    } catch (error) {\n      console.log(\"Permission API not supported, will try direct access\");\n      return \"prompt\"; // Assume we need to prompt if the API isn't available\n    }\n  };\n\n  const startCamera = async () => {\n    // First, clean up any existing stream\n    cleanupCamera();\n    setError(null);\n    \n    try {\n      // Check camera permission first\n      await checkCameraPermission();\n      \n      const constraints = {\n        video: isMobile \n          ? { facingMode: { exact: \"environment\" } } \n          : true,\n        audio: false\n      };\n\n      console.log(\"Requesting camera with constraints:\", JSON.stringify(constraints));\n      \n      // Force a small timeout to ensure DOM is ready\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      console.log(\"Camera stream obtained successfully\");\n      \n      // Store the stream reference\n      streamRef.current = stream;\n      \n      // Ensure video element is ready\n      if (!videoRef.current) {\n        console.error(\"Video element reference is null\");\n        setError(\"Camera initialization failed: video element not found\");\n        cleanupCamera();\n        return;\n      }\n      \n      // Set the stream as the video source\n      videoRef.current.srcObject = stream;\n      console.log(\"Stream assigned to video element\");\n      \n      // Setup event handlers\n      videoRef.current.onloadedmetadata = () => {\n        console.log(\"Video metadata loaded, dimensions:\", \n          videoRef.current.videoWidth, \"x\", videoRef.current.videoHeight);\n        \n        videoRef.current.play()\n          .then(() => {\n            console.log(\"Video playing successfully\");\n            setCameraActive(true);\n          })\n          .catch(err => {\n            console.error(\"Video play error:\", err);\n            setError(\"Could not play video stream: \" + err.message);\n            cleanupCamera();\n          });\n      };\n      \n      videoRef.current.onerror = (event) => {\n        console.error(\"Video element error:\", event);\n        setError(\"Video element error: \" + (event.message || \"Unknown error\"));\n        cleanupCamera();\n      };\n      \n    } catch (error) {\n      console.error(\"Camera access error:\", error);\n      \n      // Provide more specific error messages\n      if (error.name === \"NotAllowedError\") {\n        setError(\"Camera access denied. Please grant camera permissions in your browser settings.\");\n      } else if (error.name === \"NotFoundError\") {\n        setError(\"No camera found on this device.\");\n      } else if (error.name === \"NotReadableError\") {\n        setError(\"Camera is in use by another application.\");\n      } else if (error.name === \"OverconstrainedError\") {\n        // Try again with less strict constraints\n        try {\n          console.log(\"Retrying with basic constraints\");\n          const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });\n          streamRef.current = stream;\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play()\n              .then(() => {\n                setCameraActive(true);\n              })\n              .catch(e => {\n                setError(\"Could not play video stream: \" + e.message);\n                cleanupCamera();\n              });\n          };\n        } catch (retryError) {\n          console.error(\"Retry failed:\", retryError);\n          setError(\"Camera not compatible with requested settings.\");\n          cleanupCamera();\n        }\n      } else {\n        setError(\"Could not access camera: \" + error.message);\n      }\n    }\n  };\n\n  const stopCamera = () => {\n    cleanupCamera();\n    setCameraActive(false);\n    \n    // Clear video source\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n  };\n\n  const captureImage = () => {\n    if (!videoRef.current) {\n      console.error(\"Video ref not available\");\n      setError(\"Could not capture image: video element not found.\");\n      return;\n    }\n    \n    if (!canvasRef.current) {\n      console.error(\"Canvas ref not available\");\n      setError(\"Could not capture image: canvas element not found.\");\n      return;\n    }\n\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      \n      // Get the actual video dimensions\n      const videoWidth = video.videoWidth;\n      const videoHeight = video.videoHeight;\n      \n      console.log(\"Video dimensions for capture:\", videoWidth, \"x\", videoHeight);\n      \n      if (videoWidth === 0 || videoHeight === 0) {\n        console.error(\"Video dimensions are zero\");\n        setError(\"Cannot capture image: video stream not ready. Please restart the camera.\");\n        return;\n      }\n      \n      // Set canvas dimensions to match video\n      canvas.width = videoWidth;\n      canvas.height = videoHeight;\n      \n      // Draw the video frame to the canvas\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n      \n      // Convert canvas to blob\n      canvas.toBlob((blob) => {\n        if (blob) {\n          console.log(\"Image captured successfully, size:\", blob.size, \"bytes\");\n          const imageUrl = URL.createObjectURL(blob);\n          setImagePreview(imageUrl);\n          setCaption(\"\");\n          generateCaption(blob);\n        } else {\n          console.error(\"Failed to create blob from canvas\");\n          setError(\"Failed to process captured image.\");\n        }\n      }, 'image/jpeg', 0.95);\n    } catch (error) {\n      console.error(\"Image capture error:\", error);\n      setError(\"Failed to capture image: \" + error.message);\n    }\n  };\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.key === \"c\") startCamera();\n      else if (event.key === \"Escape\") stopCamera();\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  return (\n    <div style={styles.container}>\n      <h1 style={styles.header}>📸 VisionMate</h1>\n      \n      {error && (\n        <div style={styles.errorBox}>\n          <p style={styles.errorText}>⚠️ {error}</p>\n        </div>\n      )}\n\n      <div style={styles.cameraContainer}>\n        {!cameraActive ? (\n          <button \n            onClick={startCamera} \n            style={styles.button}\n            disabled={loading}\n          >\n            📷 Open Camera\n          </button>\n        ) : (\n          <>\n            <div style={styles.videoContainer}>\n              <video \n                ref={videoRef} \n                autoPlay \n                playsInline \n                muted\n                style={styles.video} \n              />\n            </div>\n            \n            <div style={styles.buttonContainer}>\n              <button \n                onClick={captureImage} \n                style={styles.button}\n                disabled={loading}\n              >\n                {loading ? \"Processing...\" : \"📸 Capture Image\"}\n              </button>\n              <button \n                onClick={stopCamera} \n                style={{...styles.button, backgroundColor: \"#ff4d4d\"}}\n              >\n                ❌ Close Camera\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n      \n      {/* Canvas for image processing - keep hidden but in the DOM */}\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n      \n      {imagePreview && (\n        <div style={styles.previewContainer}>\n          <h3 style={styles.sectionHeader}>Image Preview</h3>\n          <img \n            src={imagePreview} \n            alt=\"Captured\" \n            style={styles.previewImage} \n          />\n        </div>\n      )}\n\n      {caption && (\n        <div style={styles.captionContainer}>\n          <h3 style={styles.sectionHeader}>Caption</h3>\n          <p style={styles.captionText}>{caption}</p>\n        </div>\n      )}\n      \n      <div style={styles.footer}>\n        <p>Status: {cameraActive ? \"Camera active\" : \"Camera inactive\"}</p>\n        {cameraPermission && <p>Camera permission: {cameraPermission}</p>}\n      </div>\n    </div>\n  );\n}\n\n// Enhanced styles\nconst styles = {\n  container: {\n    padding: '15px',\n    maxWidth: '600px',\n    margin: '0 auto',\n    fontFamily: 'Arial, sans-serif',\n    minHeight: '100vh',\n    boxSizing: 'border-box',\n  },\n  header: {\n    textAlign: 'center',\n    color: '#007bff',\n    marginBottom: '20px',\n  },\n  cameraContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: '20px',\n  },\n  videoContainer: {\n    width: '100%',\n    maxWidth: '480px',\n    margin: '0 auto 10px auto',\n    borderRadius: '8px',\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n    border: '2px solid #000',\n  },\n  video: {\n    width: '100%',\n    height: 'auto',\n    display: 'block',\n  },\n  buttonContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    maxWidth: '480px',\n    gap: '10px',\n  },\n  button: {\n    padding: '15px 20px',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    color: 'white',\n    backgroundColor: '#007bff',\n    border: 'none',\n    borderRadius: '5px',\n    cursor: 'pointer',\n    width: '100%',\n    WebkitAppearance: 'none', // Fix for iOS styling\n  },\n  previewContainer: {\n    marginTop: '20px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n  },\n  sectionHeader: {\n    color: '#333',\n    marginBottom: '10px',\n    textAlign: 'center',\n  },\n  previewImage: {\n    maxWidth: '100%',\n    borderRadius: '8px',\n    border: '1px solid #ddd',\n  },\n  captionContainer: {\n    marginTop: '20px',\n    padding: '15px',\n    backgroundColor: '#f8f9fa',\n    borderRadius: '8px',\n    width: '100%',\n    boxSizing: 'border-box',\n  },\n  captionText: {\n    fontSize: '18px',\n    color: '#007bff',\n    textAlign: 'center',\n    wordBreak: 'break-word',\n  },\n  errorBox: {\n    backgroundColor: '#ffeeee',\n    padding: '10px',\n    borderRadius: '5px',\n    marginBottom: '15px',\n    width: '100%',\n    boxSizing: 'border-box',\n  },\n  errorText: {\n    color: '#d32f2f',\n    margin: 0,\n  },\n  footer: {\n    marginTop: '20px',\n    fontSize: '14px',\n    color: '#666',\n    textAlign: 'center',\n  }\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}